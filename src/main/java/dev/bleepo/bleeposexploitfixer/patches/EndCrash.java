package dev.bleepo.bleeposexploitfixer.patches;

import dev.bleepo.bleeposexploitfixer.Main;
import org.bukkit.World;
import org.bukkit.entity.EntityType;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.EntityTeleportEvent;

public class EndCrash implements Listener {
    private final Main plugin;

    public EndCrash(Main plugin) {
        this.plugin = plugin;
    }

    @EventHandler
    private void onEntityTeleportEvent(EntityTeleportEvent e) {
        if(plugin.getConfig().getBoolean("endgatewaycrash")) {
            if(e.getEntity().getWorld().getEnvironment().equals(World.Environment.THE_END) && !e.getEntity().isEmpty()) {
                e.setCancelled(true);
            }
        }

        if(plugin.getConfig().getBoolean("multipledragons")) {
            if(e.getEntity().getWorld().getEnvironment().equals(World.Environment.THE_END) && e.getEntity().getType().equals(EntityType.ENDER_DRAGON)) {
                e.setCancelled(true);
            }
        }
    }
}
