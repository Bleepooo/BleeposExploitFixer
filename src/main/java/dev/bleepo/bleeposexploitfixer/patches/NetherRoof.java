package dev.bleepo.bleeposexploitfixer.patches;

import dev.bleepo.bleeposexploitfixer.Main;
import org.bukkit.Location;
import org.bukkit.World;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerMoveEvent;
import org.bukkit.event.player.PlayerTeleportEvent;

public class NetherRoof implements Listener {
    private final Main plugin;

    public NetherRoof(Main plugin) {
        this.plugin = plugin;
    }

    public void onTeleport(PlayerTeleportEvent e) {
        if (plugin.getConfig().getBoolean("preventnetherroof")) {
            if (e.getPlayer().getWorld().getEnvironment().equals(World.Environment.NETHER)) {
                if (e.getFrom().getY() < 128 && e.getTo().getY() >= 128) {
                    e.getPlayer().teleport(e.getFrom());
                }
            }
        }
    }

    public void onMove(PlayerMoveEvent e) {
        if (plugin.getConfig().getBoolean("preventnetherroof")) {
            if (e.getPlayer().getWorld().getEnvironment().equals(World.Environment.NETHER)) {
                if (e.getPlayer().getLocation().getY() >= 128) {
                    e.getPlayer().teleport(new Location(e.getPlayer().getWorld(), e.getPlayer().getLocation().getX(), 125, e.getPlayer().getLocation().getZ()));
                }
            }
        }
    }
}
